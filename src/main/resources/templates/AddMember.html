<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
	<div class="container-scroller">
		<th:block th:insert="AdminHeader.html"></th:block>
		<div class="container-fluid page-body-wrapper">
			<th:block th:insert="AdminSideNav.html"></th:block>
			<div class="main-panel">
				<div class="content-wrapper">
				<!-- Page header -->
					 	<div class="d-flex justify-content-between align-items-center mb-4">
						<h1 class="h3 text-dark"></h1>
						<ol class="breadcrumb">
							<li class="breadcrumb-item"><a href="/">Dashboard</a></li>
							<li class="breadcrumb-item active">Member Registration</li>
						</ol>
					</div>
					<h2 class="text-center">Membership Registration</h2>
					<div class="container mt-5">
						<form id="multiTabForm" class="forms-sample" action="/member"
							method="post" enctype="multipart/form-data">
							<!-- Tab navigation -->
							<ul class="nav nav-tabs" id="formTabs" role="tablist">
								<li class="nav-item" role="presentation">
									<button class="nav-link active" id="tab1-tab"
										data-bs-toggle="tab" data-bs-target="#tab1" type="button"
										role="tab">Personal Details</button>
								</li>
								<li class="nav-item" role="presentation">
									<button class="nav-link" id="tab2-tab" data-bs-toggle="tab"
										data-bs-target="#tab2" type="button" role="tab">Address
										Details</button>
								</li>
								<li class="nav-item" role="presentation">
									<button class="nav-link" id="tab3-tab" data-bs-toggle="tab"
										data-bs-target="#tab3" type="button" role="tab">Contact
										Details</button>
								</li>
								<li class="nav-item" role="presentation">
									<button class="nav-link" id="tab4-tab" data-bs-toggle="tab"
										data-bs-target="#tab4" type="button" role="tab">Family
										Details</button>
								</li>
							</ul>
							<!-- Tab content -->
							<div class="tab-content mt-3" id="formTabsContent">
								<!-- Tab 1 Content -->
								<div class="tab-pane fade show active" id="tab1" role="tabpanel">
									<div class="row">
										<div class="form-group  ">
											<label for="title">MemberShip Type</label> <select
												name="membershipType" class="form-control">
												<option value="">MemberShip Type</option>
												<option value="Lifetime Member">Lifetime Member</option>
												<option value="Honorary Member">Honorary Member</option>
											</select>
										</div>
									</div>
									<div class="row">
										<div class="form-group  title-group">
											<label for="title">Title</label> <select name="title"
												class="form-control">
												<option value="">Select</option>
												<option value="Mrs">Mrs</option>
												<option value="Mr">Mr</option>
												<option value="Miss">Miss</option>
											</select>
										</div>
										<div class="form-group">
											<label for="firstName">First Name</label> <input
												id="firstName" type="text" placeholder="First Name"
												name="firstName" class="form-control" />
										</div>
										<div class="form-group">
											<label for="middleName">Middle Name</label> <input
												id="middleName" type="text" placeholder="Middle Name"
												name="middleName" class="form-control" />
										</div>
									</div>
									<div class="row">
										<div class="form-group">
											<label for="lastName">Last Name</label> <input id="lastName"
												type="text" placeholder="Last Name" name="lastName"
												class="form-control" />
										</div>
										<div class="form-group">
											<label for="memberImage">Image</label> <input
												id="memberImage" type="file" placeholder="Select Image"
												name="memberImage" class="form-control" />
										</div>
									</div>
									<button type="button" class="btn btn-primary next-btn"
										data-next="tab2">Next</button>
								</div>
								<!-- Tab 2 Content -->
								<div class="tab-pane fade" id="tab2" role="tabpanel">
									<div class="row">
										<div class="form-group">
											<label for="houseNumberOrName">House Number or Name</label> <input
												id="houseNumberOrName" type="text"
												placeholder="House Number or Name"
												name="address.houseNumberOrName" class="form-control" />
										</div>
										<div class="form-group">
											<label for="street">Street</label> <input id="street"
												type="text" placeholder="Street" name="address.street"
												class="form-control" />
										</div>
									</div>
									<div class="row">
										<div class="form-group">
											<label for="locality">Locality</label> <input id="locality"
												type="text" placeholder="Locality" name="address.locality"
												class="form-control" />
										</div>
										<div class="form-group">
											<label for="town">Town</label> <input id="town" type="text"
												placeholder="Town" name="address.town" class="form-control" />
										</div>
									</div>
									<div class="row">
										<div class="form-group">
											<label for="country">Country</label> <input id="country"
												type="text" placeholder="Country" name="address.country"
												class="form-control" />
										</div>
										<div class="form-group">
											<label for="postalCode">Postal Code</label> <input
												id="postalCode" type="text" placeholder="Postal Code"
												name="address.postalCode" class="form-control" />
										</div>
									</div>
									<button type="button" class="btn btn-primary next-btn"
										data-next="tab3">Next</button>
								</div>
								<!-- Tab 3 Content -->
								<div class="tab-pane fade" id="tab3" role="tabpanel">
									<div class="row">
										<div class="form-group">
											<label for="email">Email</label> <input id="email"
												type="email" placeholder="Email" name="contact.email"
												class="form-control" />
										</div>
										<div class="form-group">
											<label for="landline">Landline</label> <input id="landline"
												type="number" placeholder="Landline" name="contact.landline"
												class="form-control" />
										</div>
									</div>
									<div class="row">
										<div class="form-group">
											<label for="mobileNumber">Mobile Number</label> <input
												id="mobileNumber" type="number" placeholder="Mobile Number"
												name="contact.mobileNumber" class="form-control" />
										</div>
									</div>
									<button type="button" class="btn btn-primary next-btn"
										data-next="tab4">Next</button>
								</div>
								<!-- Tab 3 Content -->
								<div class="tab-pane fade" id="tab4" role="tabpanel">
									<div id="familyContainer">
										<!-- Dynamic family member sections will appear here -->
									</div>
									<!-- Button to show family information -->
									<div>
										<button type="button" id="addFamilyBtn"
											class="btn btn-primary next-btn">Add</button>
									</div>
									<button type="submit" class="btn btn-success buttonTopMargin">Submit</button>
								</div>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
		<th:block th:insert="AdminFooter.html"></th:block>
	</div>
	<!-- Bootstrap JS and Popper.js -->
	<script
		src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"></script>
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"></script>
	<script>
  document.addEventListener('DOMContentLoaded', function () {
    const nextButtons = document.querySelectorAll('.next-btn');
    
    nextButtons.forEach(button => {
      button.addEventListener('click', function () {
        const nextTab = this.getAttribute('data-next');
        const nextTabEl = document.querySelector(`#${nextTab}-tab`);
        
        if (nextTabEl) {
          const tab = new bootstrap.Tab(nextTabEl);
          tab.show();
        }
      });
    });
  });
</script>
	<script>
        const addFamilyBtn = document.getElementById('addFamilyBtn');
        const familyContainer = document.getElementById('familyContainer');
        let familyMemberCount = 0;
        addFamilyBtn.addEventListener('click', function () {
            familyMemberCount++;
            const familyMemberSection = document.createElement('div');
            familyMemberSection.classList.add('family-member-section');
            familyMemberSection.innerHTML = `
                <div class="row">
                    <div class="form-group">
                        <label for="relation${familyMemberCount}" >Relation</label>
                        <select id="relation${familyMemberCount}" name="family[${familyMemberCount}].relation" class="form-control" >
                    	<option value="">Select Relation</option>
                    	<option value="Son">Son</option>
                    	<option value="Daughter">Daughter</option>
                    	<option value="Son-In-Law">Son-In-Law</option>
                    	<option value="Daughter-In-Law">Daughter-In-Law</option>
                    	<option value="Grandfather">Grandfather</option>
                    	<option value="GrandMother">GrandMother</option>
                    	<option value="Father">Father</option>
                    	<option value="Mother">Mother</option>
                    	<option value="Reserve">Reserve</option>
                    </select>
                    </div>
                </div>
                <div class="row">
                <div class="form-group  title-group">
				<label for="familyTitle${familyMemberCount}">Title</label>
				<select name="family[${familyMemberCount}].title" id="familyTitle${familyMemberCount}" class="form-control">
					<option value="">Select</option>
					<option value="Mrs">Mrs</option>
					<option value="Mr">Mr</option>
					<option value="Miss">Miss</option>
				</select>
			</div>
                    <div class="form-group">
                        <label for="familyFirstName${familyMemberCount}">First Name</label>
                        <input id="familyFirstName${familyMemberCount}" type="text" placeholder="Member First Name" name="family[${familyMemberCount}].firstName" class="form-control"/>
                        
                        </div>
                    <div class="form-group">
                        <label for="familyMiddleName${familyMemberCount}">Middle Name</label>
                    
                        <input id="familyMiddleName${familyMemberCount}" type="text" placeholder="Member Middle Name" name="family[${familyMemberCount}].middleName" class="form-control"/>
                        
                             </div>
                <div class="row">
               		<div class="form-group">
               		<label for="familyLastName${familyMemberCount}">Last Name</label>
              		<input id="familyLastName${familyMemberCount}" type="text" placeholder="Member Last Name" name="family[${familyMemberCount}].lastName" class="form-control" />
          		</div>
                <div class="form-group">
                      <label for="familyImage${familyMemberCount}">Image</label>
                      <input id="familyImage${familyMemberCount}" type="file" placeholder="Select Image" name="familyImages" class="form-control"/>
                  </div>
              </div>
             <div>
                <button type="button" class="remove-btn" onclick="removeFamilyMember(this)">Remove</button>
                </div>
                
            `;
            
              familyContainer.appendChild(familyMemberSection);
        });
        function removeFamilyMember(button) {
        	console.log("what is happening");
        	 const familyMemberSection = button.closest('.family-member-section'); // Get the closest family-member-section
        	    if (familyMemberSection && familyContainer.contains(familyMemberSection)) {
        	        familyContainer.removeChild(familyMemberSection); // Remove it from the container
        	    } else {
        	        console.error("The family member section is not found or not a child of familyContainer");
        	    }
        }
    </script>
</body>
</html>