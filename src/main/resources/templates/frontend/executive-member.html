<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="description"
        content="Support our mission to make a difference. Join us in empowering communities, providing aid, and creating a better future for those in need.">
    <meta name="keywords" content="HTML, CSS, Jquery">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Executive member</title>
    <link rel="stylesheet" href="./assets/vendors/swiper/swiper-bundle.min.css">
    <link rel="stylesheet" href="./assets/vendors/fontawesome/css/all.min.css">
    <link rel="stylesheet" href="assets/vendors/slicknav/slicknav.min.css">
    <link rel="stylesheet" href="./assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="./assets/vendors/venobox/venobox.min.css">
    <link rel="stylesheet" href="./assets/css/style.css">
    <!-- favicon -->
    <link rel="icon" type="image/x-icon" href="./assets/image/tamang-samaj-uk-favicon.png">
</head>

<body>
    <header class="site-header">
        <div class="top-header py-2">
            <div class="container">
                <div class="d-flex justify-content-end align-items-center gap-5">
                    <div class="add-member">
                       <a class="fw-bold" href="#"><i class="me-1 fa-solid fa-plus"></i>New Member</a>
                    </div>
                    <div class="social-media d-flex gap-3 align-items-center">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fa-brands fa-x-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
            </div>
        </div>
        <div class="main-header navbar-expand-xl">
            <div class="container">
                <div class="menu-wrapper d-flex justify-content-between align-items-center">
                    <div class="site-logo d-flex align-items-center gap-3">
                        <a href="./index.html"><img src="./assets/image/tamangSamajuk.png" alt="Charity-logo"></a>
                        <h3 class="mb-0"><a href="./index.html">Tamang Samaj UK<span class="mt-1 d-block">Charity Reg
                                    No:12342434</span></a></h3>
                    </div>
                    <div class="nav-wrap">
                        <button class="d-xl-none site-nav-toggler" type="button" data-bs-toggle="offcanvas"
                            data-bs-target="#offcanvas_navigation" aria-controls="offcanvas_navigation">
                            <svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M22,17 L22,19 L2,19 L2,17 L22,17 Z M22,11 L22,13 L2,13 L2,11 L22,11 Z M22,5 L22,7 L2,7 L2,5 L22,5 Z"
                                    fill-rule="evenodd" />
                            </svg>
                        </button>

                        <div class="header-offcanvas offcanvas offcanvas-start" tabindex="-1" id="offcanvas_navigation">
                            <div class="offcanvas-header">
                                <button type="button" class="btn-close" data-bs-dismiss="offcanvas"
                                    aria-label="Close"></button>
                            </div>
                            <div class="offcanvas-body">
                                <nav class="header-nav">
                                    <ul class="menu d-flex flex-wrap gap-4">
                                        <li><a href="/fHome">Home</a></li>
                                        <li><a href="/fAbout">About Us</a></li>
                                        <li><a href="/fNews">News</a></li>
                                        <li><a href="/fEvent">Events</a></li>
                                        <li><a href="fExecutive">Executive Members</a></li>
                                        <li><a href="fGallery">Gallery</a></li>
                                        <li><a href="fContact">Contact Us</a></li>
                                    </ul>
                                </nav>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <section class="executive-member block">
        <div class="container">
            <div class="member-card-content d-flex align-items-start">
                <div class="nav nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                    <div class="row g-4">
                        <div class="col-md-6 col-lg-3 committee-sticky">
                            <h3 class="h4 mb-4">Executive Committees</h3>
                            <div class="member-card-wrapper">
                                <!-- Loop through committee presidents -->
                                <div th:each="committeePresident : ${committeePresidentList}">
                                    <div class="d-flex flex-shrink-0 d-md-block mb-3 nav-link p-0 president-card" 
                                       th:data-active-from="${committeePresident.activeFrom}" 
     th:data-active-to="${committeePresident.activeTo}" 
                                         role="tab">
                                        <img src="./assets/image/men-image.jpg" alt="men-image">
                                        <div class="card-body">
                                            <h3 class="h5">[[${committeePresident.member.firstName}]]</h3>
                                            <span>CEO</span>
                                            <div class="date d-flex align-items-center gap-2 mt-3">
                                                <i class="fa-solid fa-clock-rotate-left"></i>
                                                <span>[[${committeePresident.activeFrom}]] - [[${committeePresident.activeTo}]]</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 col-lg-9">
                            <div class="tab-details tab-content" id="v-pills-tabContent">
                                <div class="tab-pane fade show active" id="v-pills-home" role="tabpanel" 
                                     aria-labelledby="v-pills-home-tab" tabindex="0">
                                    <h2 class="h4 text-center mb-1">Committee Members</h2>
                                    <div class="row g-4 mt-20" id="member-list">
                                        <!-- Member cards will be injected here by JavaScript -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <footer class="site-footer">
        <div class="container">
            <div class="row g-4">
                <div class="col-md-3">
                    <div class="site-logo d-flex align-items-center gap-3">
                        <a href="./index.html"><img src="./assets/image/tamang-samaj-uk-rooter-logo.png"
                                alt="Charity-logo"></a>
                        <h3 class="mb-0"><a href="./index.html">Tamang Samaj UK<span class="mt-1 d-block">Charity Reg
                                    No:12342434</span></a></h3>
                    </div>
                    <div class="footer-content mt-4">
                        <p class="mb-0 text-white">Lorem ipsum, dolor sit amet consectetur adipisicing elit. Voluptates
                            architecto neque dolor atque ullam labore! Amet ad deleniti assumenda non voluptates ex
                            velit, voluptatum beatae animi reiciendis dolorum voluptate at.</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <h6>Quicks Links</h6>
                    <ul class="footer-quick-link mt-4">
                        <li>
                            <a href="#">home</a>
                        </li>
                        <li>
                            <a href="#">about us</a>
                        </li>
                        <li>
                            <a href="#">news</a>
                        </li>
                        <li>
                            <a href="#">events</a>
                        </li>
                        <li>
                            <a href="#">executive members</a>
                        </li>
                        <li>
                            <a href="#">gallery</a>
                        </li>
                        <li>
                            <a href="#">contact us</a>
                        </li>
                    </ul>
                </div>
                <div class="col-md-3">
                    <h6>Social Media</h6>
                    <div class="d-flex footer-social gap-3 mt-4">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fa-brands fa-x-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                <div class="col-md-3">
                    <h6>Contact Us</h6>
                    <ul class="footer-contact-info mt-4">
                        <li>
                            <div class="info-icon">
                                <i class="fas fa-map-marker-alt"></i>
                            </div>
                            <p class="mb-0 fw-medium">123 Street, City, Country</p>
                        </li>
                        <li>
                            <div class="info-icon">
                                <i class="fas fa-phone"></i>
                            </div>
                            <a href="tel:+1234567890">+123 456 7890</a>
                        </li>
                        <li>
                            <div class="info-icon">
                                <i class="far fa-envelope"></i>
                            </div>
                            <a href="mailto:info@example.com">info@example.com</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>
    <script src="assets/js/jquery.min.js"></script>
    <script src="./assets/vendors/venobox/venobox.min.js"></script>
    <script src="assets/js/bootstrap.bundle.min.js"></script>
    <script src="assets/vendors/swiper/swiper-bundle.min.js"></script>
    <script src="assets/vendors/slicknav/jquery.slicknav.min.js"></script>
    <script src="assets/js/script.js"></script>
     <script>
     $(document).ready(function() {
    	    let membersUrl = "http://localhost:7080/committeeMemberList1";

    	    // Load members from the server
    	    let members = [];

    	    $.get(membersUrl, function(data) {
    	        members = data; // Assuming data is an array of member objects
    	        
    	        // Sort members by designation: president > vice president > treasurer > others
    	        members.sort(function(a, b) {
    	            const designationOrder = {
    	                "President": 1,
    	                "Vice President": 2,
    	                "Treasurer": 3,
    	                "Junior Treasurer": 4,
    	                "Secretary": 5,
    	                "Vice Secretary": 6,
    	                "Editor": 7,
    	                "Committee Member": 8
    	            };

    	            return (designationOrder[a.designation] || 9) - (designationOrder[b.designation] || 9);
    	        });

    	        console.log(members); // Ensure sorted members are logged correctly
    	        
    	        // Trigger click on the first president to load their members
    	        $('.president-card').first().click();
    	    });
           

    	    
    	    console.log(members);

    	    // Display members when a president is clicked
    	    $('.president-card').click(function() {
    	        const activeFromStr = $(this).data('active-from');
    	        const activeToStr = $(this).data('active-to');

    	        // Highlight the selected president by adding 'president-active' class
    	        $('.president-card').removeClass('active'); // Remove class from all
    	        $(this).addClass('active'); // Add class to the clicked president
    	        // Clear existing members
    	        $('#member-list').empty();

    	        // Filter and display members based on exact active dates
    	        members.forEach(member => {
    	            const memberActiveFromStr = member.activeFrom;
    	            const memberActiveToStr = member.activeTo;

    	            // Check if member's active period matches exactly with president's active period
    	            if (memberActiveFromStr === activeFromStr && memberActiveToStr === activeToStr) {
    	                // If there's an exact match, append member details to the member list
    	                $('#member-list').append(`
    	                    <div class="col-lg-6 col-xl-4 col-xxl-3">
    	                        <div class="card ex-member-card">
    	                            <img src="./assets/image/men-image.jpg" alt="men-image">
    	                            <div class="card-body">
    	                                <h3 class="h4">${member.member.firstName}</h3>
    	                                <span>${member.designation}</span>
    	                                <div class="date d-flex align-items-center gap-2 mt-3 justify-content-center">
    	                                    <i class="fa-solid fa-clock-rotate-left"></i>
    	                                    <span>${memberActiveFromStr} - ${memberActiveToStr}</span>
    	                                </div>
    	                            </div>
    	                        </div>
    	                    </div>
    	                `);
    	            } else {
    	                console.log("No exact match for:", member.member.firstName); // Log no match
    	            }
    	        });

    	        // Check if no members matched and display a message
    	        if ($('#member-list').is(':empty')) {
    	            $('#member-list').append(`
    	                <div class="col-12">
    	                    <div class="alert alert-info text-center">
    	                        No members found for the selected president's exact active period.
    	                    </div>
    	                </div>
    	            `);
    	        }
    	    });
    	});

</script>

</body>

</html>